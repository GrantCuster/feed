{{ define "head" }}
{{ $title := "Grant Custer â†’ Feed" }}
{{ $description := "Work and inspiration in progress." }}
<title>{{ $title }}</title>
<meta property="description" content="{{ $description }}">
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:image" content="{{ .Site.BaseURL }}feed.png">
<meta property="og:url" content="{{ .Site.BaseURL }}">
<meta property="twitter:card" content="summary_large_image">
{{ end }}

{{ define "main" }}

<div class="container">
  <div>Feed</div>
  <div><p><a href="/work">Work</a> and <a href="/inspiration">inspiration</a> in progress</p></div>
</div>

<div class="spacer"></div>

<div id="posts-holder">
  {{ range first 16 .Site.RegularPages.ByDate.Reverse }}
   {{ partial "post.html" . }}
 {{ end }}
</div>

<div class="container">
  <div>
    <button id="load_more" class="button-hover">Load more</button>
  </div>
</div>

<script>
  window.addEventListener('load', () => {
    let $posts_holder = document.getElementById('posts-holder')
    let $load_more = document.getElementById('load_more')
    let next_page = 2
    $load_more.addEventListener('click', () => {
      fetch(`/posts/page/${next_page}`).then(r =>r.text()).then(r => {
        let el = document.createElement('html')
        el.innerHTML = r
        next_page += 1
        let $posts = el.querySelector('#posts-holder').children
        for (let i=0; i< $posts.length; i++) {
          let $post = $posts[i].cloneNode(true)
          $posts_holder.appendChild($post)
        }
      })
    })
  })
</script>


<div class="spacer"></div>
<div class="spacer"></div>

<div class="container">
  <div>About</div>
  <div>
    <p>Grant Custer is a designer-programmer interested in alternative interfaces.</p>
    <p>{{ "Feed is where I document work and inspiration in progress. It is built using [Hugo](https://gohugo.io/) and hosted on [Github](https://github.com/GrantCuster/feed). There is an [RSS feed](/rss.xml). I make posts to it using a simple private app built using [Node.js](https://nodejs.org). The font is [JetBrains Mono](https://www.jetbrains.com/lp/mono/)." | markdownify }}</p>
    <p>{{ "You can see my experimental interface work at [constraint.systems](https://constraint.systems). I also design and build prototypes for [Cloudera Fast Forward](https://blog.fastforwardlabs.com). I'm happy to talk on [Twitter](https://twitter.com/grantcuster), email: grantcuster at gmail dot com, or [Mastodon](https://vis.social/@grantcuster). You can see a full list of projects on my [Index](https://grantcuster.com)." | markdownify }}</p>
  </div>
  <div class="spacer"></div>
</div>

{{ end }}
